var SlimStat={_base64_key_str:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789._-",_utf8_encode:function(a){var b,d,e="";for(a=a.replace(/\r\n/g,"\n"),b=0;b<a.length;b++)d=a.charCodeAt(b),128>d?e+=String.fromCharCode(d):127<d&&2048>d?(e+=String.fromCharCode(192|d>>6),e+=String.fromCharCode(128|63&d)):(e+=String.fromCharCode(224|d>>12),e+=String.fromCharCode(128|63&d>>6),e+=String.fromCharCode(128|63&d));return e},_base64_encode:function(a){var b,c,d,e,f,g,h,j="",k=0;for(a=SlimStat._utf8_encode(a);k<a.length;)b=a.charCodeAt(k++),c=a.charCodeAt(k++),d=a.charCodeAt(k++),e=b>>2,f=(3&b)<<4|c>>4,g=(15&c)<<2|d>>6,h=63&d,isNaN(c)?g=h=64:isNaN(d)&&(h=64),j=j+SlimStat._base64_key_str.charAt(e)+SlimStat._base64_key_str.charAt(f)+SlimStat._base64_key_str.charAt(g)+SlimStat._base64_key_str.charAt(h);return j},get_page_performance:function(){return slim_performance=window.performance||window.mozPerformance||window.msPerformance||window.webkitPerformance||{},"undefined"==typeof slim_performance.timing?0:slim_performance.timing.loadEventEnd-slim_performance.timing.responseEnd},get_server_latency:function(){return slim_performance=window.performance||window.mozPerformance||window.msPerformance||window.webkitPerformance||{},"undefined"==typeof slim_performance.timing?0:slim_performance.timing.responseEnd-slim_performance.timing.connectEnd},optout:function(a,b){a.preventDefault(),("string"!=typeof SlimStatParams.baseurl||0==SlimStatParams.baseurl.length)&&(SlimStatParams.baseurl="/"),expiration=new Date,expiration.setTime(expiration.getTime()+31536e6),document.cookie="slimstat_optout_tracking="+b+";path="+SlimStatParams.baseurl+";expires="+expiration.toGMTString(),a.target.parentNode.parentNode.removeChild(a.target.parentNode)},show_optout_message:function(){opt_out_cookies=SlimStat.empty(SlimStatParams.oc)?[]:SlimStatParams.oc.split(","),Array.isArray(opt_out_cookies)||(opt_out_cookies=[]),show_optout=0<opt_out_cookies.length;for(var a=0;a<opt_out_cookies.length;a++)""!=SlimStat.get_cookie(opt_out_cookies[a])&&(show_optout=!1);if(show_optout){try{xhr=new XMLHttpRequest}catch(a){return!1}if("object"==typeof xhr)return xhr.open("POST",SlimStatParams.ajaxurl,!0),xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),xhr.withCredentials=!0,xhr.send("action=slimstat_optout_html"),xhr.onreadystatechange=function(){4==xhr.readyState&&document.body.insertAdjacentHTML("beforeend",xhr.responseText)},!0}},add_event:function(a,b,c){a&&a.addEventListener?a.addEventListener(b,c,!1):a&&a.attachEvent?(a["e"+b+c]=c,a[b+c]=function(){a["e"+b+c](window.event)},a.attachEvent("on"+b,a[b+c])):a["on"+b]=a["e"+b+c]},in_array:function(a,b){for(var c=0;c<b.length;c++)if(-1!=a.indexOf(b[c].trim()))return!0;return!1},empty:function(a){return!("undefined"!=typeof a&&null!=a)||("number"==typeof a?0==a:"boolean"==typeof a?!a:"string"!=typeof a&&"object"!=typeof a||0==a.length)},get_cookie:function(a){var b="; "+document.cookie,c=b.split("; "+a+"=");return 2==c.length?c.pop().split(";").shift():""},send_to_server:function(a,b){if(SlimStat.empty(SlimStatParams.ajaxurl)||SlimStat.empty(a))return!1;if("undefined"==typeof b&&(b=!0),slimstat_data_with_client_info=a+"&sw="+screen.width+"&sh="+screen.height+"&bw="+window.innerWidth+"&bh="+window.innerHeight+"&sl="+SlimStat.get_server_latency()+"&pp="+SlimStat.get_page_performance(),b&&navigator.sendBeacon)navigator.sendBeacon(SlimStatParams.ajaxurl,slimstat_data_with_client_info);else{try{xhr=new XMLHttpRequest}catch(a){return!1}if("object"==typeof xhr)return xhr.open("POST",SlimStatParams.ajaxurl,!0),xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),xhr.withCredentials=!0,xhr.send(slimstat_data_with_client_info),xhr.onreadystatechange=function(){4==xhr.readyState&&(parsed_id=parseInt(xhr.responseText),!isNaN(parsed_id)&&0<parsed_id&&(SlimStatParams.id=xhr.responseText))},!0}return!1},ss_track:function(a,b){if(SlimStat.empty(SlimStatParams.id)||isNaN(parseInt(SlimStatParams.id))||0>=parseInt(SlimStatParams.id))return!1;if(note_array=[],SlimStat.empty(a)||note_array.push(a),"undefined"==typeof b&&(b=!0),SlimStat.empty(window.event))return!1;if(!SlimStat.empty(window.event.target))target_node=window.event.target;else if(!SlimStat.empty(window.event.srcElement))target_node=window.event.srcElement;else return!1;if(resource_url="",do_not_track=SlimStat.empty(SlimStatParams.dnt)?[]:SlimStatParams.dnt.split(","),!SlimStat.empty(do_not_track.length)&&(target_classes=SlimStat.empty(target_node.className)?[]:target_node.className.split(" "),0!=target_classes.filter(a=>-1!==do_not_track.indexOf(a)).length||!SlimStat.empty(target_node.attributes)&&!SlimStat.empty(target_node.attributes.rel)&&!SlimStat.empty(target_node.attributes.rel.value)&&SlimStat.in_array(target_node.attributes.rel.value,do_not_track)))return!1;if(!SlimStat.empty(target_node.nodeName))switch(target_node.nodeName){case"FORM":SlimStat.empty(target_node.action)||(resource_url=target_node.action);break;case"INPUT":for(parent_node=target_node.parentNode;"undefined"!=typeof parent_node&&"FORM"!=parent_node.nodeName&&"BODY"!=parent_node.nodeName;)parent_node=parent_node.parentNode;SlimStat.empty(parent_node.action)||(resource_url=parent_node.action);break;default:for(parent_node=target_node;"undefined"!=typeof parent_node&&"A"!=parent_node.nodeName&&"BODY"!=parent_node.nodeName;)parent_node=parent_node.parentNode;if("A"==parent_node.nodeName)if(target_node=parent_node,!SlimStat.empty(target_node.hash)&&target_node.hostname==location.hostname)resource_url=target_node.hash;else if(!SlimStat.empty(target_node.href)&&-1==target_node.href.indexOf("javascript:")){if(SlimStat.in_array(target_node.href,do_not_track))return!1;resource_url=target_node.href}"function"==typeof target_node.getAttribute&&(!SlimStat.empty(target_node.getAttribute("title"))&&note_array.push("Title:"+target_node.getAttribute("title")),!SlimStat.empty(target_node.getAttribute("id"))&&note_array.push("ID:"+target_node.getAttribute("id")));}return position="0,0",SlimStat.empty(window.event.pageX)||SlimStat.empty(window.event.pageY)?!SlimStat.empty(window.event.clientX)&&!SlimStat.empty(document.body.scrollLeft)&&!SlimStat.empty(document.documentElement.scrollLeft)&&(position=window.event.clientX+document.body.scrollLeft+document.documentElement.scrollLeft+","+window.event.clientY+document.body.scrollTop+document.documentElement.scrollTop):position=window.event.pageX+","+window.event.pageY,SlimStat.empty(window.event.type)||(note_array.push("type:"+window.event.type),"keypress"==window.event.type?note_array.push("keypress:"+String.fromCharCode(parseInt(window.event.which))):"click"==window.event.type&&note_array.push("which:"+window.event.which)),SlimStat.send_to_server("action=slimtrack&id="+SlimStatParams.id+"&ref="+SlimStat._base64_encode(document.referrer)+"&res="+SlimStat._base64_encode(resource_url)+"&pos="+position+"&no="+SlimStat._base64_encode(note_array.join(", ")),b),!0}};"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),SlimStat.add_event(window,"load",function(){slimstat_data="",use_beacon=!0,SlimStat.empty(SlimStatParams.id)?(slimstat_data="action=slimtrack&ref="+SlimStat._base64_encode(document.referrer)+"&res="+SlimStat._base64_encode(window.location.href),!SlimStat.empty(SlimStatParams.ci)&&(slimstat_data+="&ci="+SlimStatParams.ci),use_beacon=!1):0<parseInt(SlimStatParams.id)&&(slimstat_data="action=slimtrack&id="+SlimStatParams.id),0<slimstat_data.length&&setTimeout(function(){SlimStat.send_to_server(slimstat_data,use_beacon)},50),all_links=document.getElementsByTagName("a");for(var a=0;a<all_links.length;a++)SlimStat.add_event(all_links[a],"click",function(){SlimStat.ss_track()});SlimStat.show_optout_message()});